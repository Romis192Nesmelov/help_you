window.tokenField=$("input[name=_token]").val();window.bornMask="99-99-9999";window.fancyBoxSettings={autoScale:!0,touch:!1,transitionIn:"elastic",transitionOut:"elastic",speedIn:500,speedOut:300,autoDimensions:!0,centerOnScroll:!0};window.singlePoint=null;const c=(e,n)=>{e.each(function(){let t=$(this),i=t.find("img.hover-image"),o=t.find("img.image"),a=t.find("input[type=file]"),u=t.find("a.fancybox"),w=t.find("i.icon-file-plus2"),r=t.find("i.icon-close2");a.change(function(){let d=$(this)[0].files[0];if(d!==void 0&&d.type.match("image.*")){let s=new FileReader;s.onload=function(l){o.length?(o.attr("src",l.target.result),u.length&&u.attr("href",l.target.result)):t.css("background-image","url("+l.target.result+")"),t.trigger("onload_image",[l.target.result])},s.readAsDataURL(d),w.hide(),r.removeClass("d-none").removeClass("hidden"),r.show()}else n&&t.css("background-image","url("+n+")")}).on("mouseover",function(){i.show()}).on("mouseout",function(){i.hide()}),r.click(function(d){if(a.val(""),n?t.css("background-image","url("+n+")"):t.css("background-image",""),w.removeClass("d-none").removeClass("hidden"),w.show(),r.removeClass("d-block"),r.hide(),t.hasClass("order-photo")){let s=parseInt(t.attr("id").replace("photo",""));t.find(".icon-file-plus2").show(),window.emitter.emit("remove-order-photo",s)}})})};window.userRating=e=>{if(e.length){let n=0;return $.each(e,function(t,i){n+=i.value}),Math.round(n/e.length)}else return 0};window.getUserAge=e=>{let n=new Date,t=e.split("-"),i=n.getFullYear()-parseInt(t[2]);n.getMonth()+1<=parseInt(t[1])&&n.getDay()<parseInt(t[1])&&i--;let o=i.toString().substr(-1,1),a;return o===0?a="лет":o===1?a="год":o>1&&o<5?a="года":a="лет",i+" "+a};window.initImages=()=>{$(".file-styled").uniform({wrapperClass:"bg-orange-800",fileButtonHtml:'<i class="icon-file-plus"></i>'}),window.avatarBlock=$(".avatar.cir"),window.defAvatar="/images/def_avatar.svg",c(window.avatarBlock,window.defAvatar),c($(".order-photo")),c($(".box-image"))};window.addLoader=()=>{$("body").prepend($("<div></div>").attr("id","loader").append($("<div></div>"))).css({"overflow-y":"hidden","padding-right":20})};window.removeLoader=()=>{$("#loader").remove(),$("body").css("overflow-y","auto")};window.showMessage=e=>{const n=$("#message-modal");n.find("h4").html(e),n.modal("show")};window.bindFancybox=()=>{setTimeout(()=>{$(".fancybox").fancybox(window.fancyBoxSettings)},500)};window.getPlaceMark=(e,n)=>new ymaps.Placemark(e,n,{preset:"islands#darkOrangeCircleDotIcon"});window.zoomAndCenterMap=()=>{window.myMap.setCenter(window.singlePoint,17)};window.mapInit=e=>{window.myMap=new ymaps.Map(e,{center:[55.76,37.64],zoom:10,controls:[]})};window.mapStepsInit=()=>{$("#map-steps").length&&ymaps.ready(()=>{window.mapInit("map-steps"),window.singlePoint&&(window.placemark=window.getPlaceMark(window.singlePoint,{}),window.myMap.geoObjects.add(window.placemark),window.zoomAndCenterMap())})};window.convertTime=e=>new Date(e).toLocaleDateString("ru-RU").replaceAll(".","/");window.getDate=e=>{let n=e.split("/"),t=n[1]+"."+n[0]+"."+n[2];return new Date(t).getTime()};window.cropContent=(e,n)=>(e=e.toString(),e.length>n?e.substr(0,n)+"…":e);window.findSomething=(e,n)=>{let t=!1;return $.each(e,function(i,o){if(o.id===n)return t=i,!1}),t};
