(function(i,H){function o(e){var s=Array.prototype.slice.call(arguments,1);return e.prop?e.prop.apply(e,s):e.attr.apply(e,s)}function u(e,s,n){var a,t;for(a in n)n.hasOwnProperty(a)&&(t=a.replace(/ |$/g,s.eventNamespace),e.bind(t,n[a]))}function c(e,s,n){u(e,n,{focus:function(){s.addClass(n.focusClass)},blur:function(){s.removeClass(n.focusClass),s.removeClass(n.activeClass)},mouseenter:function(){s.addClass(n.hoverClass)},mouseleave:function(){s.removeClass(n.hoverClass),s.removeClass(n.activeClass)},"mousedown touchbegin":function(){e.is(":disabled")||s.addClass(n.activeClass)},"mouseup touchend":function(){s.removeClass(n.activeClass)}})}function f(e,s){e.removeClass(s.hoverClass+" "+s.focusClass+" "+s.activeClass)}function x(e,s,n){n?e.addClass(s):e.removeClass(s)}function p(e,s,n){var a="checked",t=s.is(":"+a);s.prop?s.prop(a,t):t?s.attr(a,a):s.removeAttr(a),x(e,n.checkedClass,t)}function d(e,s,n){x(e,n.disabledClass,s.is(":disabled"))}function v(e,s,n){switch(n){case"after":return e.after(s),e.next();case"before":return e.before(s),e.prev();case"wrap":return e.wrap(s),e.parent()}return null}function m(e,s,n){var a,t,r;return n||(n={}),n=i.extend({bind:{},divClass:null,divWrap:"wrap",spanClass:null,spanHtml:null,spanWrap:"wrap"},n),a=i("<div />"),t=i("<span />"),s.autoHide&&e.is(":hidden")&&e.css("display")==="none"&&a.hide(),n.divClass&&a.addClass(n.divClass),s.wrapperClass&&a.addClass(s.wrapperClass),n.spanClass&&t.addClass(n.spanClass),r=o(e,"id"),s.useID&&r&&o(a,"id",s.idPrefix+"-"+r),n.spanHtml&&t.html(n.spanHtml),a=v(e,a,n.divWrap),t=v(e,t,n.spanWrap),d(a,e,s),{div:a,span:t}}function b(e,s){var n;return s.wrapperClass?(n=i("<span />").addClass(s.wrapperClass),n=v(e,n,"wrap")):null}function B(){var e,s,n,a;return a="rgb(120,2,153)",s=i('<div style="width:0;height:0;color:'+a+'">'),i("body").append(s),n=s.get(0),e=window.getComputedStyle?window.getComputedStyle(n,"").color:(n.currentStyle||n.style||{}).color,s.remove(),e.replace(/ /g,"")!==a}function O(e){return e?i("<span />").text(e).html():""}function A(){return navigator.cpuClass&&!navigator.product}function P(){return window.XMLHttpRequest!==void 0}function W(e){var s;return e[0].multiple?!0:(s=o(e,"size"),!(!s||1>=s))}function h(){return!1}function C(e,s){var n="none";u(e,s,{"selectstart dragstart mousedown":h}),e.css({MozUserSelect:n,msUserSelect:n,webkitUserSelect:n,userSelect:n})}function S(e,s,n){var a=e.val();a===""?a=n.fileDefaultHtml:(a=a.split(/[\/\\]+/),a=a[a.length-1]),s.text(a)}function D(e,s,n){var a,t;for(a=[],e.each(function(){var r;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(a.push({el:this,name:r,old:this.style[r]}),this.style[r]=s[r])}),n();a.length;)t=a.pop(),t.el.style[t.name]=t.old}function M(e,s){var n;n=e.parents(),n.push(e[0]),n=n.not(":visible"),D(n,{visibility:"hidden",display:"block",position:"absolute"},s)}function N(e,s){return function(){e.unwrap().unwrap().unbind(s.eventNamespace)}}var y=!0,E=!1,T=[{match:function(e){return e.is("a, button, :submit, :reset, input[type='button']")},apply:function(e,s){var n,a,t,r,l;return a=s.submitDefaultHtml,e.is(":reset")&&(a=s.resetDefaultHtml),r=e.is("a, button")?function(){return e.html()||a}:function(){return O(o(e,"value"))||a},t=m(e,s,{divClass:s.buttonClass,spanHtml:r()}),n=t.div,c(e,n,s),l=!1,u(n,s,{"click touchend":function(){var g,z,w,k;l||e.is(":disabled")||(l=!0,e[0].dispatchEvent?(g=document.createEvent("MouseEvents"),g.initEvent("click",!0,!0),z=e[0].dispatchEvent(g),e.is("a")&&z&&(w=o(e,"target"),k=o(e,"href"),w&&w!=="_self"?window.open(k,w):document.location.href=k)):e.click(),l=!1)}}),C(n,s),{remove:function(){return n.after(e),n.remove(),e.unbind(s.eventNamespace),e},update:function(){f(n,s),d(n,e,s),e.detach(),t.span.html(r()).append(e)}}}},{match:function(e){return e.is(":checkbox")},apply:function(e,s){var n,a,t;return n=m(e,s,{divClass:s.checkboxClass}),a=n.div,t=n.span,c(e,a,s),u(e,s,{"click touchend":function(){p(t,e,s)}}),p(t,e,s),{remove:N(e,s),update:function(){f(a,s),t.removeClass(s.checkedClass),p(t,e,s),d(a,e,s)}}}},{match:function(e){return e.is(":file")},apply:function(e,s){function n(){S(e,r,s)}var a,t,r,l;return a=m(e,s,{divClass:s.fileClass,spanClass:s.fileButtonClass,spanHtml:s.fileButtonHtml,spanWrap:"after"}),t=a.div,l=a.span,r=i("<span />").html(s.fileDefaultHtml),r.addClass(s.filenameClass),r=v(e,r,"after"),o(e,"size")||o(e,"size",t.width()/10),c(e,t,s),n(),A()?u(e,s,{click:function(){e.trigger("change"),setTimeout(n,0)}}):u(e,s,{change:n}),C(r,s),C(l,s),{remove:function(){return r.remove(),l.remove(),e.unwrap().unbind(s.eventNamespace)},update:function(){f(t,s),S(e,r,s),d(t,e,s)}}}},{match:function(e){if(e.is("input")){var s=(" "+o(e,"type")+" ").toLowerCase(),n=" color date datetime datetime-local email month number password search tel text time url week ";return n.indexOf(s)>=0}return!1},apply:function(e,s){var n,a;return n=o(e,"type"),e.addClass(s.inputClass),a=b(e,s),c(e,e,s),s.inputAddTypeAsClass&&e.addClass(n),{remove:function(){e.removeClass(s.inputClass),s.inputAddTypeAsClass&&e.removeClass(n),a&&e.unwrap()},update:h}}},{match:function(e){return e.is(":radio")},apply:function(e,s){var n,a,t;return n=m(e,s,{divClass:s.radioClass}),a=n.div,t=n.span,c(e,a,s),u(e,s,{"click touchend":function(){i.uniform.update(i(':radio[name="'+o(e,"name")+'"]'))}}),p(t,e,s),{remove:N(e,s),update:function(){f(a,s),p(t,e,s),d(a,e,s)}}}},{match:function(e){return!!(e.is("select")&&!W(e))},apply:function(e,s){var n,a,t,r;return s.selectAutoWidth&&M(e,function(){r=e.width()}),n=m(e,s,{divClass:s.selectClass,spanHtml:(e.find(":selected:first")||e.find("option:first")).html(),spanWrap:"before"}),a=n.div,t=n.span,s.selectAutoWidth?M(e,function(){D(i([t[0],a[0]]),{display:"block"},function(){var l;l=t.outerWidth()-t.width(),a.width(r+l),t.width(r)})}):a.addClass("fixedWidth"),c(e,a,s),u(e,s,{change:function(){t.html(e.find(":selected").html()),a.removeClass(s.activeClass)},"click touchend":function(){var l=e.find(":selected").html();t.html()!==l&&e.trigger("change")},keyup:function(){t.html(e.find(":selected").html())}}),C(t,s),{remove:function(){return t.remove(),e.unwrap().unbind(s.eventNamespace),e},update:function(){s.selectAutoWidth?(i.uniform.restore(e),e.uniform(s)):(f(a,s),t.html(e.find(":selected").html()),d(a,e,s))}}}},{match:function(e){return!!(e.is("select")&&W(e))},apply:function(e,s){var n;return e.addClass(s.selectMultiClass),n=b(e,s),c(e,e,s),{remove:function(){e.removeClass(s.selectMultiClass),n&&e.unwrap()},update:h}}},{match:function(e){return e.is("textarea")},apply:function(e,s){var n;return e.addClass(s.textareaClass),n=b(e,s),c(e,e,s),{remove:function(){e.removeClass(s.textareaClass),n&&e.unwrap()},update:h}}}];A()&&!P()&&(y=!1),i.uniform={defaults:{activeClass:"active",autoHide:!0,buttonClass:"button",checkboxClass:"checker",checkedClass:"checked",disabledClass:"disabled",eventNamespace:".uniform",fileButtonClass:"action",fileButtonHtml:"Choose File",fileClass:"uploader",fileDefaultHtml:"Выберите файл",filenameClass:"filename",focusClass:"focus",hoverClass:"hover",idPrefix:"uniform",inputAddTypeAsClass:!0,inputClass:"uniform-input",radioClass:"radio",resetDefaultHtml:"Reset",resetSelector:!1,selectAutoWidth:!0,selectClass:"selector",selectMultiClass:"uniform-multiselect",submitDefaultHtml:"Submit",textareaClass:"uniform",useID:!0,wrapperClass:null},elements:[]},i.fn.uniform=function(e){var s=this;return e=i.extend({},i.uniform.defaults,e),E||(E=!0,B()&&(y=!1)),y?(e.resetSelector&&i(e.resetSelector).mouseup(function(){window.setTimeout(function(){i.uniform.update(s)},10)}),this.each(function(){var n,a,t,r=i(this);if(r.data("uniformed"))return i.uniform.update(r),void 0;for(n=0;T.length>n;n+=1)if(a=T[n],a.match(r,e))return t=a.apply(r,e),r.data("uniformed",t),i.uniform.elements.push(r.get(0)),void 0})):this},i.uniform.restore=i.fn.uniform.restore=function(e){e===H&&(e=i.uniform.elements),i(e).each(function(){var s,n,a=i(this);n=a.data("uniformed"),n&&(n.remove(),s=i.inArray(this,i.uniform.elements),s>=0&&i.uniform.elements.splice(s,1),a.removeData("uniformed"))})},i.uniform.update=i.fn.uniform.update=function(e){e===H&&(e=i.uniform.elements),i(e).each(function(){var s,n=i(this);s=n.data("uniformed"),s&&s.update(n,s.options)})}})(jQuery);
