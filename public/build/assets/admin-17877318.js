import{_ as S,M as z,B as T,r as d,o as s,d as j,w as H,a as o,t as b,c as i,i as x,p as I,F as g,h as y,n as U,g as v,I as L,A as P,R as F,b as l,j as E,f as M,T as q,l as G,O as Q,U as N,k as X,m as O,v as Z,y as R,z as ee,C as te}from"./InputImageComponent-75b3b2c0.js";const ne={name:"DeleteItemModalComponent",components:{ModalComponent:z,ButtonComponent:T},props:{delete_phrase:String}},oe={class:"w-100 text-center"},se={class:"modal-footer"},re=o("i",{class:"icon-checkmark4"},null,-1),ae=o("span",null,"Да",-1),ie=[re,ae],le=o("button",{type:"button",class:"btn btn-primary","data-bs-dismiss":"modal","data-dismiss":"modal"},[o("i",{class:"icon-cancel-circle2"}),o("span",null,"Нет")],-1);function de(t,e,r,f,n,m){const c=d("ModalComponent");return s(),j(c,{id:"confirm-delete-modal",head:"Подтверждение удаления"},{default:H(()=>[o("h2",oe,b(r.delete_phrase),1),o("div",se,[o("button",{onClick:e[0]||(e[0]=k=>t.$emit("clickYes")),type:"button",class:"btn btn-primary","data-bs-dismiss":"modal","data-dismiss":"modal"},ie),le])]),_:1})}const ce=S(ne,[["render",de]]),ue={name:"ShowCaseComponent",created(){let t=this;$(document).ready(function(){$(".select-show-by").select2({minimumResultsForSearch:1/0,width:80}).change(function(){t.showBy=$(this).val(),t.$emit("changeShowCase",t.showBy)})})},data(){return{showCases:[5,10,20,30,50],showBy:10}},emits:["changeShowCase"]},_e=o("span",{class:"hidden-sm"},"Показывать по:",-1),pe=["value"];function me(t,e,r,f,n,m){return s(),i("div",null,[_e,x(o("select",{class:"select-show-by","onUpdate:modelValue":e[0]||(e[0]=c=>n.showBy=c)},[(s(!0),i(g,null,y(n.showCases,c=>(s(),i("option",{key:"show-by-"+c,value:c},b(c),9,pe))),128))],512),[[I,n.showBy]])])}const he=S(ue,[["render",me]]),ge={name:"PaginatorComponent",props:{links:Array},emits:["paginate"]},be={key:0,class:"pagination"},fe=["onClick"],ve={key:0},Ce={key:1},ke={key:2};function ye(t,e,r,f,n,m){return r.links.length>3?(s(),i("ul",be,[(s(!0),i(g,null,y(r.links,(c,k)=>(s(),i("li",{class:U(c.active?"active":""),key:"paginate-"+k,onClick:p=>t.$emit("paginate",c.url)},[c.label.indexOf("Пред")===8?(s(),i("span",ve,"‹")):c.label.indexOf("След")===0?(s(),i("span",Ce,"›")):(s(),i("span",ke,b(c.label),1))],10,fe))),128))])):v("",!0)}const B=S(ge,[["render",ye]]),we={name:"DataTableComponent",components:{InputComponent:L,ButtonComponent:T,DeleteItemModalComponent:ce,ShowCaseComponent:he,PaginatorComponent:B,AvatarComponent:P,RatingLineComponent:F},props:{fields:Object,arrange:String,delete_phrase:String|null,get_data_url:String,edit_url:String|null,delete_url:String|null,change_avatar_url:String|NaN,broadcast_on:String|null,broadcast_as:String|null,channel_on:String|null,channel_as:String|null},created(){let t=this;this.arrangeCol=JSON.parse(t.arrange),this.getDataUrl=this.get_data_url,this.getData(this.get_data_url),this.broadcast_on&&window.Echo.private(this.broadcast_on).listen("."+this.broadcast_as,e=>{t.broadcasting(e)}),this.channel_on&&window.Echo.channel(this.channel_on).listen("."+this.channel_as,e=>{t.broadcasting(e)})},data(){return{getDataUrl:String,items:Object,itemsSubData:"",showBy:10,filter:"",deleteId:Number,arrangeCol:Object,deleteModal:Object|null,deletingId:null}},methods:{broadcasting(t){if(t.notice==="new_item"||t.notice==="del_item")this.getData(this.getUrl());else if(t.notice==="change_item"){for(let e=0;e<this.items.data.length;e++)if(this.items.data[e].id===t.model.id){this.items.data[e]=t.model;break}}},getData(t){let e=this;axios.get(t).then(function(r){e.items=r.data.items})},paginate(t){this.getData(this.getUrl(t))},changeShowCase(t){this.showBy=t,this.getData(this.getUrl(this.get_data_url))},confirmDel(t){this.deleteId=t,$("#confirm-delete-modal").modal("show")},delRow(){let t=this,e=new FormData;e.append("_token",window.tokenField),e.append("id",this.deleteId),axios.post(this.delete_url,e).then(function(r){t.getData(t.getUrl()),window.showMessage(r.data.message)}).catch(function(r){})},setArrange(t,e){let r=this.arrangeCol.field===t&&e==="asc"?"desc":"asc";this.arrangeCol.field=t,this.arrangeCol.direction=r,this.getData(this.getUrl())},filtered(){let t=this;t.getData(t.getUrl(t.get_data_url))},getUrl(t){t&&(this.getDataUrl=t);let e=this.getDataUrl.indexOf("page")!==-1?"&":"?";return this.filter&&(this.filter.length===3&&this.filter.indexOf("(")===-1&&this.filter[0]==="+"&&(this.filter[1]==="7"||this.filter[1]==="8")&&this.filter[2]==="9"||(this.filter[0]==="7"||this.filter[0]==="8")&&this.filter[1]==="9"?this.filter="+7(9":this.filter.length===6&&this.filter.match(/^(\+7\(9\d{2})$/gi)!==null?this.filter=this.filter+")":this.filter.length===10&&this.filter.match(/^(\+7\(9\d{2}\)\d{3})$/gi)!==null?this.filter=this.filter+"-":this.filter.length===13&&this.filter.match(/^(\+7\(9\d{2}\)\d{3}-\d{2})$/gi)!==null?this.filter=this.filter+"-":this.filter.length>16&&this.filter.match(/^(\+7\(9\d{2}\)\d{3}-\d{2}-\d{3})$/gi)!==null&&(this.filter=this.filter.slice(0,16))),this.getDataUrl+e+"field="+this.arrangeCol.field+"&direction="+this.arrangeCol.direction+"&show_by="+this.showBy+(this.filter?"&filter="+this.filter:"")+this.getAdditionalFilters()},getAdditionalFilters(){return""},getUserRating(t){return window.userRating(t)},getUrlWithParam(t){return this.edit_url+(this.edit_url.indexOf("?")===-1?"?":"&")+"id="+t},getAdditionalFilterUser(){let t="";for(let e=0;e<this.users.length;e++)(this.users[e].name.toLowerCase().indexOf(this.filter.toLowerCase())!==-1||this.users[e].family.toLowerCase().indexOf(this.filter.toLowerCase())!==-1)&&(t+="&users_ids[]="+this.users[e].id);return t},cutString(t,e){return t.length>e?t.substring(0,e)+"…":t}}},Se={class:"dt-top-line"},je={class:"table-responsive"},$e={class:"table table-bordered table-striped"},Ue={key:0,class:"tools"},xe=["onClick"],De={key:0,class:"text-center arrange"},Ie=["href"],Oe=["src"],Ne={key:5},Ae={key:0,class:"tools"},Te=["href"],Pe=o("i",{title:"Редактировать",class:"icon-pencil7"},null,-1),Be=[Pe],Me=["onClick"];function Fe(t,e,r,f,n,m){const c=d("delete-item-modal-component"),k=d("InputComponent"),p=d("ShowCaseComponent"),w=d("AvatarComponent"),u=d("RatingLineComponent"),_=d("paginator-component");return s(),i(g,null,[r.delete_url?(s(),j(c,{key:0,delete_phrase:r.delete_phrase,onClickYes:m.delRow},null,8,["delete_phrase","onClickYes"])):v("",!0),o("div",Se,[l(k,{type:"text",name:"filter",placeholder:"Фильровать",value:n.filter,"onUpdate:value":e[0]||(e[0]=a=>n.filter=a),onKeyup:m.filtered,onChange:m.filtered},null,8,["value","onKeyup","onChange"]),l(p,{onChangeShowCase:m.changeShowCase},null,8,["onChangeShowCase"])]),o("div",je,[o("table",$e,[o("thead",null,[o("tr",null,[(s(!0),i(g,null,y(r.fields,(a,h)=>(s(),i("th",{class:"text-center",key:"dt-head-"+h},b(a),1))),128)),r.edit_url||r.delete_url?(s(),i("th",Ue)):v("",!0)]),o("tr",null,[(s(!0),i(g,null,y(r.fields,(a,h)=>(s(),i("th",{class:"text-center arrange",key:"dt-arrange-by-"+h},[h!=="avatar"&&h!=="logo"&&h!=="image"&&h!=="rating"?(s(),i("i",{key:0,class:U((n.arrangeCol.field===h?"text-info ":"")+(n.arrangeCol.field===h&&n.arrangeCol.direction==="desc"?"icon-arrow-up12":"icon-arrow-down12")),onClick:C=>m.setArrange(h,n.arrangeCol.field===h?n.arrangeCol.direction:"asc")},null,10,xe)):v("",!0)]))),128)),r.edit_url||r.delete_url?(s(),i("th",De)):v("",!0)])]),o("tbody",null,[(s(!0),i(g,null,y(n.items.data,a=>(s(),i("tr",{key:"dt-row-"+a.id},[(s(!0),i(g,null,y(r.fields,(h,C)=>(s(),i("td",{class:U("text-center"+(C==="id"||C==="avatar"||C==="logo"||C==="image"||C==="user"||C==="status"||C==="active"||C==="admin"?" "+C:"")),key:"dt-cell-"+C},[C==="avatar"?(s(),j(w,{key:0,user_id:a.id,small:!0,avatar_image:a.avatar,avatar_props:a.avatar_props,change_avatar_url:r.change_avatar_url},null,8,["user_id","avatar_image","avatar_props","change_avatar_url"])):C==="rating"?(s(),j(u,{key:1,income_rating:m.getUserRating(a.ratings),allow_change_rating:!1},null,8,["income_rating"])):C==="logo"||C==="image"?(s(),i("a",{key:2,class:"fancybox",href:"/"+a[C]},[o("img",{class:"dt-image",src:"/"+a[C]},null,8,Oe)],8,Ie)):C==="active"?(s(),i("span",{key:3,class:U("label label-"+(a.active?"success":"warning"))},b(a.active?"активен":"не активен"),3)):C==="admin"?(s(),i("span",{key:4,class:U("label label-"+(a.admin?"info":"primary"))},b(a.admin?"админ":"пользователь"),3)):(s(),i("span",Ne,b(a[C]),1))],2))),128)),r.edit_url||r.delete_url?(s(),i("td",Ae,[r.edit_url?(s(),i("a",{key:0,href:m.getUrlWithParam(a.id)},Be,8,Te)):v("",!0),r.delete_url?(s(),i("i",{key:1,title:"Удалить",class:"icon-cancel-circle2 text-danger cursor-pointer",onClick:h=>m.confirmDel(a.id)},null,8,Me)):v("",!0)])):v("",!0)]))),128))])]),n.items.links?(s(),j(_,{key:0,links:n.items.links,onPaginate:m.paginate},null,8,["links","onPaginate"])):v("",!0)])],64)}const A=S(we,[["render",Fe]]),Ee={extends:A,name:"OrdersDataTableComponent",components:{UserPropertiesComponent:E,PaginatorComponent:B},data(){return{items:Object,users:Object,types:Object,statuses:[{color:"success",text:"Закрыта"},{color:"primary",text:"В работе"},{color:"default",text:"Открыта"},{color:"danger",text:"Новая"}]}},methods:{getData(t){let e=this;axios.get(t).then(function(r){e.items=r.data.items,e.users=r.data.users,e.types=r.data.types})},getAdditionalFilters(){let t=this.getAdditionalFilterUser();for(let e=0;e<this.types.length;e++)this.types[e].name.toLowerCase().indexOf(this.filter.toLowerCase())!==-1&&(t+="&order_types_ids[]="+this.types[e].id);return t}}},Re={class:"dt-top-line"},Ve={class:"table-responsive"},Le={class:"table table-bordered table-striped"},Ke={key:0,class:"tools"},Ye=["onClick"],Je=o("th",{class:"text-center arrange"},null,-1),We={key:2},ze={key:3},He={key:0,class:"tools"},qe=["href"],Ge=o("i",{title:"Редактировать",class:"icon-pencil7"},null,-1),Qe=[Ge],Xe=["onClick"];function Ze(t,e,r,f,n,m){const c=d("delete-item-modal-component"),k=d("InputComponent"),p=d("ShowCaseComponent"),w=d("UserPropertiesComponent"),u=d("paginator-component");return s(),i(g,null,[t.delete_url?(s(),j(c,{key:0,delete_phrase:t.delete_phrase,onClickYes:t.delRow},null,8,["delete_phrase","onClickYes"])):v("",!0),o("div",Re,[l(k,{type:"text",name:"filter",placeholder:"Фильровать",value:t.filter,"onUpdate:value":e[0]||(e[0]=_=>t.filter=_),onKeyup:t.filtered,onChange:t.filtered},null,8,["value","onKeyup","onChange"]),l(p,{onChangeShowCase:t.changeShowCase},null,8,["onChangeShowCase"])]),o("div",Ve,[o("table",Le,[o("thead",null,[o("tr",null,[(s(!0),i(g,null,y(t.fields,(_,a)=>(s(),i("th",{class:"text-center",key:"dt-head-"+a},b(_),1))),128)),t.edit_url||t.delete_url?(s(),i("th",Ke)):v("",!0)]),o("tr",null,[(s(!0),i(g,null,y(t.fields,(_,a)=>(s(),i("th",{class:"text-center arrange",key:"dt-arrange-by-"+a},[a!=="avatar"&&a!=="rating"?(s(),i("i",{key:0,class:U((t.arrangeCol.field===a?"text-info ":"")+(t.arrangeCol.field===a&&t.arrangeCol.direction==="desc"?"icon-arrow-up12":"icon-arrow-down12")),onClick:h=>t.setArrange(a==="user"||a==="order_type"?a+"_id":a,t.arrangeCol.field===a?t.arrangeCol.direction:"asc")},null,10,Ye)):v("",!0)]))),128)),Je])]),o("tbody",null,[(s(!0),i(g,null,y(n.items.data,_=>(s(),i("tr",{key:"dt-row-"+_.id},[(s(!0),i(g,null,y(t.fields,(a,h)=>(s(),i("td",{class:U("text-center"+(h==="id"||h==="user"||h==="status"?" "+h:"")),key:"dt-cell-"+h},[h==="user"?(s(),j(w,{key:0,user:_.user,small:!0,use_rating:!0,allow_change_rating:!1},null,8,["user"])):h==="status"?(s(),i("span",{key:1,class:U("label label-"+n.statuses[_.status].color)},b(n.statuses[_.status].text),3)):h==="order_type"?(s(),i("strong",We,b(_.order_type.name),1)):(s(),i("span",ze,b(_[h]),1))],2))),128)),t.edit_url||t.delete_url?(s(),i("td",He,[t.edit_url?(s(),i("a",{key:0,href:t.getUrlWithParam(_.id)},Qe,8,qe)):v("",!0),o("i",{title:"Удалить",class:"icon-cancel-circle2 text-danger cursor-pointer",onClick:a=>t.confirmDel(_.id)},null,8,Xe)])):v("",!0)]))),128))])]),n.items.links?(s(),j(u,{key:0,links:n.items.links,onPaginate:t.paginate},null,8,["links","onPaginate"])):v("",!0)])],64)}const et=S(Ee,[["render",Ze]]),tt={name:"OrdersComponent",components:{OrdersDataTableComponent:et},props:{orders_url:String,get_orders_url:String,edit_order_url:String,delete_order_url:String,arrange:String},data(){return{fields:{id:"id",user:"Пользователь",order_type:"Тип заявки",name:"Название",description_short:"Короткое описание",address:"Адрес",status:"Статус"}}}};function nt(t,e,r,f,n,m){const c=d("orders-data-table-component");return s(),j(c,{fields:n.fields,get_data_url:r.get_orders_url,edit_url:r.edit_order_url,delete_url:r.delete_order_url,delete_phrase:"Вы действительно хотите удалить эту заявку?",arrange:r.arrange,broadcast_on:"admin_order_event",broadcast_as:"admin_order"},null,8,["fields","get_data_url","edit_url","delete_url","arrange"])}const ot=S(tt,[["render",nt]]),st={name:"CheckboxComponent",props:["id","name","value","checked","label"]},rt={class:"form-group mt-3"},at={class:"checkbox-inline"},it=["id","checked","name"];function lt(t,e,r,f,n,m){return s(),i("div",rt,[o("label",at,[o("input",{class:"styled",id:r.id,checked:r.checked,type:"checkbox",name:r.name,onInput:e[0]||(e[0]=c=>t.$emit("update:checked",c.target.checked))},null,40,it),M(" "+b(r.label),1)])])}const dt=S(st,[["render",lt]]),ct={name:"UserComponent",components:{InputComponent:L,TextAreaComponent:q,AvatarComponent:P,ButtonComponent:T,RatingLineComponent:F,CheckboxComponent:dt},created(){let t=this;this.incoming_obj&&(this.obj=JSON.parse(this.incoming_obj)),this.obj.id&&(this.objId=this.obj.id,this.skipFields.push("avatar")),this.objId&&(this.rating=window.userRating(this.rating)),$.each(this.obj,function(e){t.skipFields.indexOf(e)===-1&&(t.errors[e]=null)}),this.broadcast_on&&window.Echo.private(this.broadcast_on).listen("."+this.broadcast_as,e=>{t.broadcasting(e)}),this.channel_on&&window.Echo.channel(this.channel_on).listen("."+this.channel_as,e=>{t.broadcasting(e)})},props:{incoming_obj:String|NaN,edit_url:String,back_url:String,change_avatar_url:String|NaN,def_avatar:String|NaN,input_image_hover:String|NaN,broadcast_on:String|NaN,broadcast_as:String|NaN,channel_on:String|NaN,channel_as:String|NaN},data(){return{objId:null,password:null,passwordConfirm:null,obj:{id:0,avatar:null,name:"",family:"",born:"",phone:"",email:"",password:"",info_about:"",mail_notice:!1,admin:!1,active:!0},rating:0,errors:{},passwordErr:null,passwordConfirmErr:null,skipFields:["id","avatar_props","updated_at","code","created_at"],disabledSubmit:!1}},methods:{broadcasting(t){let e=this;if(t.notice==="del_item"&&t.model.id===this.objId)window.location.href=this.back_url;else if(t.notice==="change_item"&&t.model.id===this.objId){this.obj=t.model,$.each(["mail_notice","admin","active","status"],function(n,m){let c=$("input[name="+m+"]");c.length&&c.prop("checked",e.obj[m])}),$.uniform.update();let r=$("input[name=start]"),f=$("input[name=end]");if(r.length&&f.length){let n=window.convertTime(t.model.start),m=window.convertTime(t.model.end);r.val(n),f.val(m)}}},preparingFields(){let t=this,e=new FormData;return this.disabledSubmit=!0,e.append("_token",window.tokenField),this.objId&&e.append("id",this.objId),$.each(this.errors,function(r){(t.obj[r]===!1||t.obj[r]===null)&&["mail_notice","admin","active","status","read_admin","read_owner"].indexOf(r)!==-1?e.append(r,0):t.obj[r]===!0?e.append(r,1):t.obj[r]!==null&&e.append(r,t.obj[r])}),e},save(){let t=this.preparingFields();t.append("born",$("input[name=born]").val()),t.append("phone",$("input[name=phone]").val()),this.password&&(t.append("password",this.password),t.append("password_confirmation",this.passwordConfirm)),this.saving(t)},saving(t){let e=this;axios.post(this.edit_url,t).then(function(r){window.showMessage(r.data.message),e.disabledSubmit=!1}).catch(function(r){$.each(r.response.data.errors,(f,n)=>{f==="password"?e.passwordErr=n[0]:f==="password_confirmation"?e.passwordConfirmErr=n[0]:e.errors[f]=n[0],e.disabledSubmit=!1})})}}},ut={class:"col-lg-2 col-md-3 col-sm-4 col-xs-12"},_t={class:"panel panel-flat"},pt={class:"panel-body display-flex"},mt={key:0},ht={key:1},gt=["src"],bt=o("input",{type:"file",name:"avatar"},null,-1),ft={class:"panel panel-flat"},vt={class:"panel-body"},Ct={class:"col-lg-10 col-md-9 col-sm-8 col-xs-12"},kt={class:"panel panel-flat"},yt={class:"panel-body"},wt={class:"panel panel-flat"},St={key:0,class:"panel-heading"},jt=o("h4",{class:"text-grey-300"},"Если вы не хотите менять пароль, оставьте эти поля пустыми",-1),$t=[jt],Ut={class:"panel-body"};function xt(t,e,r,f,n,m){const c=d("AvatarComponent"),k=d("RatingLineComponent"),p=d("CheckboxComponent"),w=d("InputComponent"),u=d("TextAreaComponent"),_=d("ButtonComponent");return s(),i(g,null,[o("div",ut,[o("div",_t,[o("div",pt,[n.objId?(s(),i("div",mt,[l(c,{user_id:n.obj.id,avatar_image:n.obj.avatar,avatar_props:n.obj.avatar_props,change_avatar_url:r.change_avatar_url},null,8,["user_id","avatar_image","avatar_props","change_avatar_url"]),l(k,{income_rating:n.rating,allow_change_rating:!1},null,8,["income_rating"])])):(s(),i("div",ht,[o("div",{class:"avatar cir",style:G("background-image: url("+r.def_avatar+")")},[o("img",{src:r.input_image_hover},null,8,gt),bt],4)]))])]),o("div",ft,[o("div",vt,[l(p,{name:"mail_notice",label:"Оповещения по E-mail",checked:n.obj.mail_notice,"onUpdate:checked":e[0]||(e[0]=a=>n.obj.mail_notice=a)},null,8,["checked"]),l(p,{name:"admin",label:"Пользователь админ",checked:n.obj.admin,"onUpdate:checked":e[1]||(e[1]=a=>n.obj.admin=a)},null,8,["checked"]),l(p,{name:"active",label:"Активирован",checked:n.obj.active,"onUpdate:checked":e[2]||(e[2]=a=>n.obj.active=a)},null,8,["checked"])])])]),o("div",Ct,[o("div",kt,[o("div",yt,[l(w,{label:"Имя пользователя",type:"text",name:"name",min:"3",max:"255",placeholder:"Имя пользователя",error:n.errors.name,value:n.obj.name,"onUpdate:value":e[3]||(e[3]=a=>n.obj.name=a),onChange:e[4]||(e[4]=a=>n.errors.name=null)},null,8,["error","value"]),l(w,{label:"Фамилия пользователя",type:"text",name:"family",min:"3",max:"255",placeholder:"Фамилия пользователя",error:n.errors.family,value:n.obj.family,"onUpdate:value":e[5]||(e[5]=a=>n.obj.family=a),onChange:e[6]||(e[6]=a=>n.errors.name=null)},null,8,["error","value"]),l(w,{label:"Дата рождения",type:"text",name:"born",max:"10",placeholder:"__-__-____",error:n.errors.born,value:n.obj.born,"onUpdate:value":e[7]||(e[7]=a=>n.obj.born=a),onChange:e[8]||(e[8]=a=>n.errors.born=null)},null,8,["error","value"]),l(w,{label:"Телефон",type:"text",name:"phone",max:"16",placeholder:"+7(___)___-__-__",error:n.errors.phone,value:n.obj.phone,"onUpdate:value":e[9]||(e[9]=a=>n.obj.phone=a),onChange:e[10]||(e[10]=a=>n.errors.phone=null)},null,8,["error","value"]),l(w,{label:"E-mail",type:"email",name:"email",max:"100",placeholder:"E-mail",error:n.errors.email,value:n.obj.email,"onUpdate:value":e[11]||(e[11]=a=>n.obj.email=a),onChange:e[12]||(e[12]=a=>n.errors.email=null)},null,8,["error","value"]),o("div",wt,[n.objId?(s(),i("div",St,$t)):v("",!0),o("div",Ut,[l(w,{label:"Пароль",type:"password",name:"password",max:"50",placeholder:"Пароль",error:n.passwordErr,value:n.password,"onUpdate:value":e[13]||(e[13]=a=>n.password=a),onChange:e[14]||(e[14]=a=>n.passwordErr=null)},null,8,["error","value"]),l(w,{label:"Подтверждение пароля",type:"password",name:"password_confirmation",max:"50",placeholder:"Подтверждение пароля",error:n.passwordConfirmErr,value:n.passwordConfirm,"onUpdate:value":e[15]||(e[15]=a=>n.passwordConfirm=a),onChange:e[16]||(e[16]=a=>n.passwordConfirmErr=null)},null,8,["error","value"])])]),l(u,{label:"Информация о пользователе",name:"info_about",max:"5000",value:n.obj.info_about,"onUpdate:value":e[17]||(e[17]=a=>n.obj.info_about=a),error:n.errors.info_about,onChange:e[18]||(e[18]=a=>n.errors.info_about=null)},null,8,["value","error"]),l(_,{class_name:"btn btn-primary mt-3 pull-right",text:"Сохранить",disabled:n.disabledSubmit,onClick:m.save},null,8,["disabled","onClick"])])])])],64)}const D=S(ct,[["render",xt]]),Dt={name:"EditOrderMapComponent",components:{OrderMapComponent:Q,ButtonComponent:T},created(){this.address=this.incoming_address,this.latitude=parseFloat(this.incoming_latitude),this.longitude=parseFloat(this.incoming_longitude)},props:{incoming_latitude:String|Number,incoming_longitude:String|Number,incoming_address:String,yandex_api_key:String},emits:["setPlaceMark"],data(){return{address:String,disabledButton:!1,latitude:0,longitude:0}},methods:{checkAddress(){this.$refs.OrderMapComponent.address?this.$refs.OrderMapComponent.getApiPlaceMark():this.$refs.OrderMapComponent.addressError="Укажите адрес!"},disableButton(t){this.disabledButton=t},setPlaceMark(t){this.latitude=window.singlePoint[0],this.longitude=window.singlePoint[1],this.address=t,this.disabledButton=!1,this.$emit("setPlaceMark",{address:this.address,latitude:this.latitude,longitude:this.longitude})}}},It=["value"],Ot=["value"],Nt={class:"panel panel-flat"},At={class:"panel-body"},Tt=o("div",{class:"panel panel-flat"},[o("div",{class:"panel-body"},[o("div",{id:"map-steps"})])],-1);function Pt(t,e,r,f,n,m){const c=d("OrderMapComponent"),k=d("ButtonComponent");return s(),i(g,null,[o("input",{type:"hidden",name:"latitude",value:n.latitude},null,8,It),o("input",{type:"hidden",name:"longitude",value:n.longitude},null,8,Ot),o("div",Nt,[o("div",At,[l(c,{incoming_address:n.address,yandex_api_key:r.yandex_api_key,get_place_mark:!0,ref:"OrderMapComponent",onDisabledButtons:m.disableButton,onSetPlaceMark:m.setPlaceMark},null,8,["incoming_address","yandex_api_key","onDisabledButtons","onSetPlaceMark"]),l(k,{class:"btn btn-secondary",text:"Проверить адрес",disabled:n.disabledButton,onClick:m.checkAddress},null,8,["disabled","onClick"])])]),Tt],64)}const K=S(Dt,[["render",Pt]]),Bt={extends:D,name:"OrderComponent",components:{UserComponent:D,UserNameComponent:N,OrderImagesComponent:X,EditOrderMapComponent:K},created(){let t=this;this.users=JSON.parse(this.incoming_users),this.types=JSON.parse(this.incoming_types),this.parent_id&&(this.obj.user_id=parseInt(this.parent_id)),$(document).ready(function(){$(".order-photo .icon-close2").click(function(){let e=parseInt($(this).attr("id").replace("remove-",""));if(t.objId){let r=new FormData;r.append("_token",window.tokenField),r.append("id",t.objId),r.append("pos",e),axios.post(t.delete_image,r).then(function(f){window.showMessage(f.data.message)}).catch(function(f){})}})})},props:{delete_image:String,incoming_users:String,incoming_types:String,yandex_api_key:String,parent_id:String|NaN},data(){return{obj:{user_id:1,order_type_id:1,subtype_id:1,city_id:1,name:"",need_performers:1,address:"",latitude:0,longitude:0,description_short:"",description_full:"",status:3},errors:{performer_id:null,photo1:null,photo2:null,photo3:null},users:[],types:{},typeId:1,photo1:"",photo2:"",photo3:"",performer_id:0,disabledButtons:!1,statusValues:[{val:0,description:"Закрыта"},{val:1,description:"В работе"},{val:2,description:"Открыта"},{val:3,description:"Новая"}]}},computed:{addressError(){return this.errors.address||this.errors.latitude||this.errors.longitude?"Укажите адрес и проверьте его по api!":null}},watch:{obj(t){t.performers.length&&(this.performer_id=t.performers[0].id);for(let e=1;e<=3;e++)for(let r=0;r<t.images.length;r++)if(e===t.images[r].position){this["photo"+e]=t.images[r].image;break}}},methods:{changeStatusOrPerformer(){this.errors.status=null,this.errors.performer_id=null,!this.performer_id&&this.obj.status<=1?this.obj.status=3:this.obj.status===3&&this.performer_id?this.performer_id=0:this.obj.status===2&&this.performer_id&&(this.obj.status=1)},save(){let t=this.preparingFields();for(let e=1;e<=3;e++)t.append("photo"+e,$("input[name=photo"+e+"]")[0].files[0]);this.obj.status===1&&t.append("performer_id",this.performer_id),this.saving(t)},setPlaceMark(t){this.obj.address=t.address,this.obj.latitude=t.latitude,this.obj.longitude=t.longitude}}},Mt={class:"col-lg-3 col-md-4 col-sm-12"},Ft={key:0,class:"panel panel-flat"},Et=o("div",{class:"panel-heading"},[o("h5",{class:"panel-title"},"Автор заявки")],-1),Rt={class:"panel-body"},Vt=["value"],Lt={class:"panel panel-flat"},Kt=o("div",{class:"panel-heading"},[o("h5",{class:"panel-title"},"Тип заявки")],-1),Yt={class:"panel-body"},Jt={class:"form-group no-margin-bottom"},Wt=["id","value"],zt=["for"],Ht={class:"form-group no-margin-bottom"},qt=["id","value"],Gt=["for"],Qt={class:"panel panel-flat"},Xt=o("div",{class:"panel-heading"},[o("h5",{class:"panel-title"},"Статус заявки")],-1),Zt={class:"panel-body"},en=["id","value"],tn=["for"],nn={key:0,class:"form-control-feedback"},on=o("i",{class:"icon-cancel-circle2"},null,-1),sn=[on],rn={key:0,class:"error"},an={class:"panel panel-flat"},ln=o("div",{class:"panel-heading"},[o("h5",{class:"panel-title"},"Исполнитель")],-1),dn={class:"panel-body"},cn=o("option",{value:0},"Нет",-1),un=["value"],_n={key:0,class:"error"},pn={class:"col-lg-9 col-md-8 col-sm-12"},mn={class:"panel panel-flat"},hn={class:"panel-body"},gn={class:"col-lg-8 col-md-6 col-sm-12"},bn={class:"col-lg-4 col-md-6 col-sm-12"},fn={class:"col-md-12 col-sm-12"},vn={class:"panel panel-flat"},Cn=o("div",{class:"panel-heading"},[o("h5",{class:"panel-title"},"Изображения")],-1),kn={class:"panel-body"},yn={class:"panel panel-flat"},wn=o("div",{class:"panel-heading"},[o("h5",{class:"panel-title"},"Адрес")],-1),Sn={class:"panel-body"},jn={key:0,class:"error"},$n={class:"panel panel-flat"},Un=o("div",{class:"panel-heading"},[o("h5",{class:"panel-title"},"Описание")],-1),xn={class:"panel-body"};function Dn(t,e,r,f,n,m){const c=d("UserNameComponent"),k=d("InputComponent"),p=d("OrderImagesComponent"),w=d("EditOrderMapComponent"),u=d("TextAreaComponent"),_=d("ButtonComponent");return s(),i(g,null,[o("div",Mt,[r.parent_id?v("",!0):(s(),i("div",Ft,[Et,o("div",Rt,[x(o("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.obj.user_id=a),class:"select form-control"},[(s(!0),i(g,null,y(n.users,(a,h)=>(s(),i("option",{value:a.id,key:"author"+h},[l(c,{user:a},null,8,["user"])],8,Vt))),128))],512),[[I,n.obj.user_id]])])])),o("div",Lt,[Kt,o("div",Yt,[(s(!0),i(g,null,y(n.types,(a,h)=>(s(),i("div",Jt,[x(o("input",{id:"order_type_"+a.id,value:a.id,type:"radio","onUpdate:modelValue":e[1]||(e[1]=C=>n.obj.order_type_id=C)},null,8,Wt),[[O,n.obj.order_type_id]]),o("label",{class:"ml-10 form-check-label",for:"order_type_"+a.id},b(a.name),9,zt),a.subtypes.length?(s(),i("div",{key:0,class:U("subtypes"+(n.obj.order_type_id!==a.id?" hidden":""))},[(s(!0),i(g,null,y(a.subtypes,(C,Sr)=>(s(),i("div",{class:"pl-15",key:"order_subtype_"+C.id},[o("div",Ht,[x(o("input",{id:"order_sub_type_"+C.id,value:C.id,type:"radio","onUpdate:modelValue":e[2]||(e[2]=W=>n.obj.subtype_id=W)},null,8,qt),[[O,n.obj.subtype_id]]),o("label",{class:"ml-10 form-check-label",for:"order_sub_type_"+C.id},[o("small",null,b(C.name),1)],8,Gt)])]))),128))],2)):v("",!0)]))),256))])]),o("div",Qt,[Xt,o("div",Zt,[(s(!0),i(g,null,y(n.statusValues,(a,h)=>(s(),i("div",{class:"form-group no-margin-bottom",key:"radio"+h},[x(o("input",{class:"order-status",id:"order_status_"+a.val,value:a.val,type:"radio","onUpdate:modelValue":e[3]||(e[3]=C=>n.obj.status=C),onChange:e[4]||(e[4]=(...C)=>m.changeStatusOrPerformer&&m.changeStatusOrPerformer(...C))},null,40,en),[[O,n.obj.status]]),o("label",{class:"ml-10 form-check-label",for:"order_status_"+a.val},[o("small",null,b(a.description),1)],8,tn),n.errors.status?(s(),i("div",nn,sn)):v("",!0)]))),128)),n.errors.status?(s(),i("div",rn,b(n.errors.status),1)):v("",!0)])]),o("div",an,[ln,o("div",dn,[x(o("select",{id:"performer","onUpdate:modelValue":e[5]||(e[5]=a=>n.performer_id=a),class:"select form-control",onChange:e[6]||(e[6]=(...a)=>m.changeStatusOrPerformer&&m.changeStatusOrPerformer(...a))},[cn,(s(!0),i(g,null,y(n.users,(a,h)=>x((s(),i("option",{value:a.id,key:"author"+h},[l(c,{user:a},null,8,["user"])],8,un)),[[Z,a.id!==n.obj.user_id]])),128))],544),[[I,n.performer_id]]),n.errors.status?(s(),i("div",_n,b(n.errors.performer_id),1)):v("",!0)])])]),o("div",pn,[o("div",mn,[o("div",hn,[o("div",gn,[l(k,{label:"Название заявки",type:"text",min:"3",max:"50",placeholder:"Введите название заявки",error:n.errors.name,value:n.obj.name,"onUpdate:value":e[7]||(e[7]=a=>n.obj.name=a),onChange:e[8]||(e[8]=a=>n.errors.name=null)},null,8,["error","value"])]),o("div",bn,[l(k,{label:"Количество исполнителей",type:"number",min:"1",max:"20",placeholder:"Количество исполнителей",error:n.errors.need_performers,value:n.obj.need_performers,"onUpdate:value":e[9]||(e[9]=a=>n.obj.need_performers=a),onChange:e[10]||(e[10]=a=>n.errors.need_performers=null)},null,8,["error","value"])]),o("div",fn,[o("div",vn,[Cn,o("div",kn,[l(p,{errors:n.errors,photo1:n.photo1,photo2:n.photo2,photo3:n.photo3,input_image_hover:t.input_image_hover},null,8,["errors","photo1","photo2","photo3","input_image_hover"])])]),o("div",yn,[wn,o("div",Sn,[m.addressError?(s(),i("div",jn,b(m.addressError),1)):v("",!0),l(w,{incoming_latitude:n.obj.latitude,incoming_longitude:n.obj.longitude,incoming_address:n.obj.address,yandex_api_key:r.yandex_api_key,onSetPlaceMark:m.setPlaceMark},null,8,["incoming_latitude","incoming_longitude","incoming_address","yandex_api_key","onSetPlaceMark"])])]),o("div",$n,[Un,o("div",xn,[l(u,{label:"Краткое описание (до 200 символов)",max:"200",value:n.obj.description_short,"onUpdate:value":e[11]||(e[11]=a=>n.obj.description_short=a),error:n.errors.description_short,onChange:e[12]||(e[12]=a=>n.errors.description_short=null)},null,8,["value","error"]),l(u,{label:"Полное описание (до 1000 символов)",max:"1000",value:n.obj.description_full,"onUpdate:value":e[13]||(e[13]=a=>n.obj.description_full=a),error:n.errors.description_full,onChange:e[14]||(e[14]=a=>n.errors.description_full=null)},null,8,["value","error"]),l(_,{class_name:"btn btn-primary mt-3 pull-right",text:"Сохранить",disabled:t.disabledSubmit,onClick:m.save},null,8,["disabled","onClick"])])])])])])])],64)}const In=S(Bt,[["render",Dn]]),On={name:"UserRatingComponent",created(){this.userRating=window.userRating(JSON.parse(this.ratings))},components:{RatingLineComponent:F},props:{ratings:String},data(){return{userRating:0}}};function Nn(t,e,r,f,n,m){const c=d("RatingLineComponent");return s(),j(c,{income_rating:n.userRating,allow_change_rating:!1},null,8,["income_rating"])}const An=S(On,[["render",Nn]]),Tn={name:"UsersComponent",components:{DataTableComponent:A},props:{get_users_url:String,edit_user_url:String,delete_user_url:String,arrange:String},data(){return{fields:{id:"id",avatar:"Аватар",rating:"Рейтинг",born:"Дата рождения",name:"Имя",family:"Фамилия",phone:"Телефон",email:"E-mail",active:"Статус",admin:"Админ"},arrangeCol:Object}}};function Pn(t,e,r,f,n,m){const c=d("data-table-component");return s(),j(c,{fields:n.fields,get_data_url:r.get_users_url,edit_url:r.edit_user_url,delete_url:r.delete_user_url,delete_phrase:"Вы действительно хотите удалить этого пользователя?",arrange:r.arrange,broadcast_on:"admin_user_event",broadcast_as:"admin_user"},null,8,["fields","get_data_url","edit_url","delete_url","arrange"])}const Bn=S(Tn,[["render",Pn]]),Mn={name:"NoticeComponent",components:{AvatarComponent:P,UserNameComponent:N},props:{incoming_notices:String,incoming_tickets:String,incoming_answers:String,incoming_user:String,orders_url:String,users_url:String,tickets_url:String,answers_url:String,logout_url:String},created(){let t=this;this.user=JSON.parse(this.incoming_user),this.notices=JSON.parse(this.incoming_notices),this.tickets=JSON.parse(this.incoming_tickets),this.answers=JSON.parse(this.incoming_answers),window.Echo.private("admin_order_event").listen(".admin_order",e=>{if(e.notice==="new_item"||e.notice==="change_item"&&e.model.status===0)t.notices.unshift({order:e.model});else if(e.notice==="change_item"&&e.model.status!==3||e.notice==="del_item"){for(let r=0;r<t.notices.length;r++)if(t.notices[r].order.id===e.model.id){t.notices.splice(r,1);break}}}),window.Echo.private("admin_ticket_event").listen(".admin_ticket",e=>{if(e.notice==="new_item"||e.notice==="change_item"&&e.model.status===1)t.tickets.unshift(e.model);else if(e.notice==="change_item"&&e.model.read_admin===1||e.notice==="del_item"){for(let r=0;r<t.tickets.length;r++)if(t.tickets[r].id===e.model.id){t.tickets.splice(r,1);break}}}),window.Echo.private("admin_answer_event").listen(".admin_answer",e=>{if(e.notice==="new_item")t.answers.unshift(e.model);else if(e.notice==="change_item"&&e.model.read_admin===1||e.notice==="del_item"){for(let r=0;r<t.answers.length;r++)if(t.answers[r].id===e.model.id){t.answers.splice(r,1);break}}})},data(){return{user:Object,notices:{},tickets:[],answers:[]}}},Fn={class:"nav navbar-nav"},En={class:"dropdown"},Rn={href:"#",class:"dropdown-toggle","data-toggle":"dropdown","aria-expanded":"false"},Vn=o("i",{class:"icon-bubbles4"},null,-1),Ln=o("span",{class:"visible-xs-inline-block position-right"},"Сообщения",-1),Kn={key:0,class:"badge bg-warning-400"},Yn={class:"dropdown-menu dropdown-content width-350"},Jn=o("div",{class:"dropdown-content-heading"},"Сообщения",-1),Wn={class:"media-list dropdown-content-body"},zn={class:"media-left"},Hn={class:"media-body"},qn={class:"text-semibold"},Gn={class:"media-annotation pull-right"},Qn=["href"],Xn={key:0},Zn={key:1},eo={class:"media-left"},to={class:"media-body"},no={class:"text-semibold"},oo={class:"media-annotation pull-right"},so=["href"],ro={class:"media-left"},ao={class:"media-body"},io={class:"text-semibold"},lo={class:"media-annotation pull-right"},co=["href"],uo={key:0},_o={key:1},po={key:0},mo=o("hr",null,null,-1),ho=["href"],go={class:"dropdown dropdown-user"},bo={class:"dropdown-toggle","data-toggle":"dropdown"},fo=o("i",{class:"caret"},null,-1),vo={class:"dropdown-menu dropdown-menu-right"},Co=["href"],ko=o("i",{class:"icon-switch2"},null,-1);function yo(t,e,r,f,n,m){const c=d("AvatarComponent"),k=d("UserNameComponent");return s(),i("ul",Fn,[o("li",En,[o("a",Rn,[Vn,Ln,n.notices.length?(s(),i("span",Kn,b(n.notices.length+n.tickets.length+n.answers.length),1)):v("",!0)]),o("div",Yn,[Jn,o("ul",Wn,[(s(!0),i(g,null,y(n.tickets,p=>(s(),i("li",{class:"media",key:"ticket-"+p.id},[o("div",zn,[l(c,{small:!0,avatar_image:p.user.avatar,avatar_props:p.user.avatar_props},null,8,["avatar_image","avatar_props"])]),o("div",Hn,[o("span",qn,[l(k,{user:p.user},null,8,["user"])]),o("span",Gn,b(new Date(p.created_at).toLocaleDateString("ru-RU")),1),o("a",{href:r.tickets_url+"?id="+p.id,class:"media-heading"},[p.status===0?(s(),i("span",Xn,"Создал новое обращение в тех.поддержку: «"+b(p.subject)+"»",1)):(s(),i("span",Zn,"Закрыл заявку «"+b(p.subject)+"»",1))],8,Qn)])]))),128)),(s(!0),i(g,null,y(n.answers,p=>(s(),i("li",{class:"media",key:"answer-"+p.id},[o("div",eo,[l(c,{small:!0,avatar_image:p.user.avatar,avatar_props:p.user.avatar_props},null,8,["avatar_image","avatar_props"])]),o("div",to,[o("span",no,[l(k,{user:p.user},null,8,["user"])]),o("span",oo,b(new Date(p.created_at).toLocaleDateString("ru-RU")),1),o("a",{href:r.answers_url+"?parent_id="+p.ticket.id+"&id="+p.id,class:"media-heading"}," Ответил в рамках заявки: «"+b(p.ticket.subject)+"» ",9,so)])]))),128)),(s(!0),i(g,null,y(n.notices,p=>(s(),i("li",{class:"media",key:"notice-"+p.order.id},[o("div",ro,[l(c,{small:!0,avatar_image:p.order.user.avatar,avatar_props:p.order.user.avatar_props},null,8,["avatar_image","avatar_props"])]),o("div",ao,[o("span",io,[l(k,{user:p.order.user},null,8,["user"])]),o("span",lo,b(new Date(p.order.created_at).toLocaleDateString("ru-RU")),1),o("a",{href:r.orders_url+"?id="+p.order.id,class:"media-heading"},[p.order.status===3?(s(),i("span",uo,"Создал новую заявку «"+b(p.order.name)+"»",1)):(s(),i("span",_o,"Закрыл заявку «"+b(p.order.name)+"»",1))],8,co),p.order.status===0?(s(),i("div",po,[mo,o("a",{href:r.users_url+"?id="+p.order.performers[0].id},[M("Исполнитель: "),l(k,{user:p.order.performers[0]},null,8,["user"])],8,ho)])):v("",!0)])]))),128))])])]),o("li",go,[o("a",bo,[l(c,{small:!0,avatar_image:n.user.avatar,avatar_props:n.user.avatar_props},null,8,["avatar_image","avatar_props"]),l(k,{user:n.user},null,8,["user"]),fo]),o("ul",vo,[o("li",null,[o("a",{href:r.logout_url},[ko,M("Выход")],8,Co)])])])])}const wo=S(Mn,[["render",yo]]),So={name:"PartnerComponents",components:{DataTableComponent:A},props:{get_partners_url:String,edit_partner_url:String,delete_partner_url:String,arrange:String},data(){return{fields:{id:"id",logo:"Логотип",name:"Название",about:"О партнере"},arrangeCol:Object}}};function jo(t,e,r,f,n,m){const c=d("data-table-component");return s(),j(c,{fields:n.fields,get_data_url:r.get_partners_url,edit_url:r.edit_partner_url,delete_url:r.delete_partner_url,delete_phrase:"Вы действительно хотите удалить этого партнера?",arrange:r.arrange,broadcast_on:"admin_partner_event",broadcast_as:"admin_partner"},null,8,["fields","get_data_url","edit_url","delete_url","arrange"])}const $o=S(So,[["render",jo]]),Uo={extends:D,name:"PartnerComponent",components:{InputImageComponent:R},props:{placeholder_image:String},data(){return{obj:{logo:"",name:"",about:"",info:""}}},methods:{save(){let t=this.preparingFields();this.obj.info=window.editor.getData(),t.append("info",this.obj.info),t.append("logo",$("input[name=logo]")[0].files[0]),this.saving(t)}}},xo={class:"col-lg-2 col-md-3 col-sm-4 col-xs-12"},Do={class:"col-lg-10 col-md-9 col-sm-8 col-xs-12"},Io={class:"panel panel-flat"},Oo={class:"panel-body"};function No(t,e,r,f,n,m){const c=d("InputImageComponent"),k=d("InputComponent"),p=d("TextAreaComponent"),w=d("ButtonComponent");return s(),i(g,null,[o("div",xo,[l(c,{name:"logo",placeholder_image:r.placeholder_image,image:n.obj.logo,error:t.errors.logo},null,8,["placeholder_image","image","error"])]),o("div",Do,[o("div",Io,[o("div",Oo,[l(k,{label:"Название",type:"text",name:"name",min:"3",max:"50",placeholder:"Название",error:t.errors.name,value:n.obj.name,"onUpdate:value":e[0]||(e[0]=u=>n.obj.name=u),onChange:e[1]||(e[1]=u=>t.errors.name=null)},null,8,["error","value"]),l(p,{label:"Описание",name:"about",max:"3000",value:n.obj.about,"onUpdate:value":e[2]||(e[2]=u=>n.obj.about=u),error:t.errors.about,onKeyup:e[3]||(e[3]=u=>t.errors.about=null)},null,8,["value","error"]),l(p,{label:"Информация о партнере",name:"info",max:"50000",value:n.obj.info,"onUpdate:value":e[4]||(e[4]=u=>n.obj.info=u),error:t.errors.info,onKeyup:e[5]||(e[5]=u=>t.errors.info=null)},null,8,["value","error"]),l(w,{class_name:"btn btn-primary mt-3 pull-right",text:"Сохранить",disabled:t.disabledSubmit,onClick:m.save},null,8,["disabled","onClick"])])])])],64)}const Ao=S(Uo,[["render",No]]),To={extends:A,name:"ActionsDataTableComponent",components:{UserPropertiesComponent:E,PaginatorComponent:B},data(){return{items:Object,itemsSubData:"actions",partners:Object,ratings:[{color:"success",text:"Стартовый"},{color:"primary",text:"Второй"},{color:"info",text:"Третий"}]}},methods:{getData(t){let e=this;axios.get(t).then(function(r){e.items=r.data.items,e.partners=r.data.partners})},getAdditionalFilters(){let t="";for(let e=0;e<this.partners.length;e++)this.partners[e].name.toLowerCase().indexOf(this.filter.toLowerCase())!==-1&&(t+="&partners_ids[]="+this.partners[e].id);return t}}},Po={class:"dt-top-line"},Bo={class:"table-responsive"},Mo={class:"table table-bordered table-striped"},Fo={key:0,class:"tools"},Eo=["onClick"],Ro={key:0,class:"text-center arrange"},Vo=["src"],Lo={key:2},Ko={key:3,class:"action-partner"},Yo=["src"],Jo={key:4},Wo={key:0,class:"tools"},zo=["href"],Ho=o("i",{title:"Редактировать",class:"icon-pencil7"},null,-1),qo=[Ho],Go=["onClick"];function Qo(t,e,r,f,n,m){const c=d("delete-item-modal-component"),k=d("InputComponent"),p=d("ShowCaseComponent"),w=d("paginator-component");return s(),i(g,null,[t.delete_url?(s(),j(c,{key:0,delete_phrase:t.delete_phrase,onClickYes:t.delRow},null,8,["delete_phrase","onClickYes"])):v("",!0),o("div",Po,[l(k,{type:"text",name:"filter",placeholder:"Фильровать",value:t.filter,"onUpdate:value":e[0]||(e[0]=u=>t.filter=u),onKeyup:t.filtered,onChange:t.filtered},null,8,["value","onKeyup","onChange"]),l(p,{onChangeShowCase:t.changeShowCase},null,8,["onChangeShowCase"])]),o("div",Bo,[o("table",Mo,[o("thead",null,[o("tr",null,[(s(!0),i(g,null,y(t.fields,(u,_)=>(s(),i("th",{class:"text-center",key:"dt-head-"+_},b(u),1))),128)),t.edit_url||t.delete_url?(s(),i("th",Fo)):v("",!0)]),o("tr",null,[(s(!0),i(g,null,y(t.fields,(u,_)=>(s(),i("th",{class:"text-center arrange",key:"dt-arrange-by-"+_},[o("i",{class:U((t.arrangeCol.field===_?"text-info ":"")+(t.arrangeCol.field===_&&t.arrangeCol.direction==="desc"?"icon-arrow-up12":"icon-arrow-down12")),onClick:a=>t.setArrange(_,t.arrangeCol.field===_?t.arrangeCol.direction:"asc")},null,10,Eo)]))),128)),t.edit_url||t.delete_url?(s(),i("th",Ro)):v("",!0)])]),o("tbody",null,[(s(!0),i(g,null,y(n.items.data,u=>(s(),i("tr",{key:"dt-row-"+u.id},[(s(!0),i(g,null,y(t.fields,(_,a)=>(s(),i("td",{class:U("text-center"+(a==="id"||a==="rating"?" "+a:"")),key:"dt-cell-"+a},[a==="image"&&t.object.image?(s(),i("img",{key:0,class:"dt-image",src:"/"+t.object.image},null,8,Vo)):a==="rating"?(s(),i("span",{key:1,class:U("label label-"+n.ratings[u.rating-1].color)},b(n.ratings[u.rating-1].text),3)):a==="start"||a==="end"?(s(),i("strong",Lo,b(new Date(u[a]).toLocaleDateString("ru-RU")),1)):a==="partner_id"?(s(),i("div",Ko,[o("img",{class:"w-25",src:"/"+u.partner.logo},null,8,Yo),o("strong",null,b(u.partner.name),1)])):(s(),i("span",Jo,b(u[a]),1))],2))),128)),t.edit_url||t.delete_url?(s(),i("td",Wo,[t.edit_url?(s(),i("a",{key:0,href:t.edit_url+(t.edit_url.indexOf("?")===-1?"?":"&")+"id="+u.id},qo,8,zo)):v("",!0),o("i",{title:"Удалить",class:"icon-cancel-circle2 text-danger cursor-pointer",onClick:_=>t.confirmDel(u.id)},null,8,Go)])):v("",!0)]))),128))])]),n.items.links?(s(),j(w,{key:0,links:n.items.links,onPaginate:t.paginate},null,8,["links","onPaginate"])):v("",!0)])],64)}const Xo=S(To,[["render",Qo]]),Zo={name:"ActionsComponent",components:{ActionsDataTableComponent:Xo},props:{actions_url:String,get_actions_url:String,edit_action_url:String,delete_action_url:String,arrange:String},data(){return{fields:{id:"id",name:"Название",start:"Начало акции",end:"Окончание акции",rating:"Рейтинг",partner_id:"Партнер"}}}};function es(t,e,r,f,n,m){const c=d("actions-data-table-component");return s(),j(c,{fields:n.fields,get_data_url:r.get_actions_url,edit_url:r.edit_action_url,delete_url:r.delete_action_url,delete_phrase:"Вы действительно хотите удалить эту акцию?",arrange:r.arrange,broadcast_on:"admin_action_event",broadcast_as:"admin_action"},null,8,["fields","get_data_url","edit_url","delete_url","arrange"])}const ts=S(Zo,[["render",es]]),ns={extends:D,name:"ActionComponent",components:{UserComponent:D,UserNameComponent:N},props:{incoming_users:String,incoming_partners:String,parent_id:String|NaN},created(){let t=this;this.users=JSON.parse(this.incoming_users),this.partners=JSON.parse(this.incoming_partners),this.parent_id&&(this.obj.partner_id=parseInt(this.parent_id)),window.emitter.on("date-change",e=>{t.obj[e.name]=e.value}),window.Echo.private("admin_incentive_event").listen(".admin_incentive",e=>{t.activeUsers=e.ids}),setTimeout(()=>{$("input[name=start]").val("14/07/1976")},2e3)},data(){return{obj:{name:"",html:"",rating:1,partner_id:1},users:[],activeUsers:[],partners:[]}},watch:{obj(t){let e=this;$.each(t.users,function(r,f){e.activeUsers.push(f.id)}),this.obj.start=window.convertTime(this.obj.start),this.obj.end=window.convertTime(this.obj.end)}},methods:{save(){if(window.getDate(this.obj.start)>=window.getDate(this.obj.end))$(".date .error").html("Время начала акции не может быть больше или равно времени окончания!"),this.disabledSubmit=!1;else{this.obj.html=window.editor.getData();let t=this.preparingFields();t.append("users_ids",this.activeUsers),this.saving(t)}}}},os={class:"col-lg-3 col-md-4 col-sm-12"},ss={key:0,class:"panel panel-flat"},rs=o("div",{class:"panel-heading"},[o("h5",{class:"panel-title"},"Партнер акции")],-1),as={class:"panel-body"},is=["value"],ls={class:"panel panel-flat"},ds=o("div",{class:"panel-heading"},[o("h5",{class:"panel-title"},"Пользователи в акции")],-1),cs={class:"panel-body"},us=["value"],_s={class:"panel panel-flat"},ps=o("div",{class:"panel-heading"},[o("h5",{class:"panel-title"},"Рейтинг акции")],-1),ms={class:"panel-body"},hs={class:"form-group no-margin-bottom"},gs=["id","value","onUpdate:modelValue"],bs=["for"],fs={class:"col-lg-9 col-md-8 col-sm-12"},vs={class:"panel panel-flat"},Cs={class:"panel-body"};function ks(t,e,r,f,n,m){const c=d("UserNameComponent"),k=d("InputComponent"),p=d("TextAreaComponent"),w=d("ButtonComponent");return s(),i(g,null,[o("div",os,[r.parent_id?v("",!0):(s(),i("div",ss,[rs,o("div",as,[x(o("select",{"onUpdate:modelValue":e[0]||(e[0]=u=>n.obj.partner_id=u),class:"select form-control"},[(s(!0),i(g,null,y(n.partners,(u,_)=>(s(),i("option",{value:u.id,key:"partner"+_},b(u.name),9,is))),128))],512),[[I,n.obj.partner_id]])])])),o("div",ls,[ds,o("div",cs,[x(o("select",{"onUpdate:modelValue":e[1]||(e[1]=u=>n.activeUsers=u),id:"action-users",class:"form-select",multiple:""},[(s(!0),i(g,null,y(n.users,(u,_)=>(s(),i("option",{key:"user-"+_,value:u.id},[l(c,{user:u},null,8,["user"])],8,us))),128))],512),[[I,n.activeUsers]])])]),o("div",_s,[ps,o("div",ms,[(s(),i(g,null,y(["Стартовый","Второй","Третий"],(u,_)=>o("div",hs,[x(o("input",{id:"action_rating_"+(_+1),value:_+1,type:"radio","onUpdate:modelValue":a=>n.obj.rating=a},null,8,gs),[[O,n.obj.rating]]),o("label",{class:"ml-10 form-check-label",for:"action_rating_"+(_+1)},b(u),9,bs)])),64))])])]),o("div",fs,[o("div",vs,[o("div",Cs,[l(k,{label:"Название акции",type:"text",name:"name",min:"3",max:"50",placeholder:"Название акции",error:t.errors.name,value:n.obj.name,"onUpdate:value":e[2]||(e[2]=u=>n.obj.name=u),onChange:e[3]||(e[3]=u=>t.errors.name=null)},null,8,["error","value"]),l(p,{label:"Содержание акции",name:"html",max:"50000",value:n.obj.html,"onUpdate:value":e[4]||(e[4]=u=>n.obj.html=u),error:t.errors.html,onKeyup:e[5]||(e[5]=u=>t.errors.html=null)},null,8,["value","error"]),l(w,{class_name:"btn btn-primary mt-3 pull-right",text:"Сохранить",disabled:t.disabledSubmit,onClick:m.save},null,8,["disabled","onClick"])])])])],64)}const ys=S(ns,[["render",ks]]),ws={extends:A,name:"TicketsDataTableComponent",components:{UserPropertiesComponent:E,PaginatorComponent:B},data(){return{users:Object,statuses:[{color:"danger",text:"Открыт"},{color:"primary",text:"Закрыт"}],readStatuses:[{color:"danger",text:"Не прочитано"},{color:"primary",text:"Прочитано"}]}},methods:{getData(t){let e=this;axios.get(t).then(function(r){e.items=r.data.items,e.users=r.data.users})},getAdditionalFilters(){return this.getAdditionalFilterUser()}}},Ss={class:"dt-top-line"},js={class:"table-responsive"},$s={class:"table table-bordered table-striped"},Us={key:0,class:"tools"},xs=["onClick"],Ds=o("th",{class:"text-center arrange"},null,-1),Is=["src"],Os={key:5},Ns={key:6},As={key:0,class:"tools"},Ts=["href"],Ps=o("i",{title:"Редактировать",class:"icon-pencil7"},null,-1),Bs=[Ps],Ms=["onClick"];function Fs(t,e,r,f,n,m){const c=d("delete-item-modal-component"),k=d("InputComponent"),p=d("ShowCaseComponent"),w=d("UserPropertiesComponent"),u=d("paginator-component");return s(),i(g,null,[t.delete_url?(s(),j(c,{key:0,delete_phrase:t.delete_phrase,onClickYes:t.delRow},null,8,["delete_phrase","onClickYes"])):v("",!0),o("div",Ss,[l(k,{type:"text",name:"filter",placeholder:"Фильровать",value:t.filter,"onUpdate:value":e[0]||(e[0]=_=>t.filter=_),onKeyup:t.filtered,onChange:t.filtered},null,8,["value","onKeyup","onChange"]),l(p,{onChangeShowCase:t.changeShowCase},null,8,["onChangeShowCase"])]),o("div",js,[o("table",$s,[o("thead",null,[o("tr",null,[(s(!0),i(g,null,y(t.fields,(_,a)=>(s(),i("th",{class:"text-center",key:"dt-head-"+a},b(_),1))),128)),t.edit_url||t.delete_url?(s(),i("th",Us)):v("",!0)]),o("tr",null,[(s(!0),i(g,null,y(t.fields,(_,a)=>(s(),i("th",{class:"text-center arrange",key:"dt-arrange-by-"+a},[o("i",{class:U((t.arrangeCol.field===a?"text-info ":"")+(t.arrangeCol.field===a&&t.arrangeCol.direction==="desc"?"icon-arrow-up12":"icon-arrow-down12")),onClick:h=>t.setArrange(a==="user"?a+"_id":a,t.arrangeCol.field===a?t.arrangeCol.direction:"asc")},null,10,xs)]))),128)),Ds])]),o("tbody",null,[(s(!0),i(g,null,y(t.items.data,_=>(s(),i("tr",{key:"dt-row-"+_.id},[(s(!0),i(g,null,y(t.fields,(a,h)=>(s(),i("td",{class:U("text-center"+(h==="id"||h==="user"||h==="status"||h==="read_admin"||h==="read_owner"?" "+h:"")),key:"dt-cell-"+h},[h==="user"?(s(),j(w,{key:0,user:_.user,small:!0,use_rating:!0,allow_change_rating:!1},null,8,["user"])):h==="image"&&_.image?(s(),i("img",{key:1,class:"dt-image",src:"/"+_.image},null,8,Is)):h==="status"?(s(),i("span",{key:2,class:U("label label-"+n.statuses[_.status].color)},b(n.statuses[_.status].text),3)):h==="read_admin"?(s(),i("span",{key:3,class:U("label label-"+n.readStatuses[_.read_admin].color)},b(n.readStatuses[_.read_admin].text),3)):h==="read_owner"?(s(),i("span",{key:4,class:U("label label-"+n.readStatuses[_.read_owner].color)},b(n.readStatuses[_.read_owner].text),3)):h==="text"?(s(),i("span",Os,b(t.cutString(_[h],300)),1)):(s(),i("span",Ns,b(_[h]),1))],2))),128)),t.edit_url||t.delete_url?(s(),i("td",As,[t.edit_url?(s(),i("a",{key:0,href:t.getUrlWithParam(_.id)},Bs,8,Ts)):v("",!0),o("i",{title:"Удалить",class:"icon-cancel-circle2 text-danger cursor-pointer",onClick:a=>t.confirmDel(_.id)},null,8,Ms)])):v("",!0)]))),128))])]),t.items.links?(s(),j(u,{key:0,links:t.items.links,onPaginate:t.paginate},null,8,["links","onPaginate"])):v("",!0)])],64)}const Y=S(ws,[["render",Fs]]),Es={name:"TicketsComponent",components:{TicketsDataTableComponent:Y},props:{get_tickets_url:String,edit_ticket_url:String,delete_ticket_url:String,arrange:String},data(){return{fields:{id:"id",user:"Пользователь",image:"Скриншот",subject:"Тема обращения",text:"Текст обращения",read_admin:"Прочитано",status:"Статус"}}}};function Rs(t,e,r,f,n,m){const c=d("TicketsDataTableComponent");return s(),j(c,{fields:n.fields,get_data_url:r.get_tickets_url,edit_url:r.edit_ticket_url,delete_url:r.delete_ticket_url,delete_phrase:"Вы действительно хотите удалить эту заявку?",arrange:r.arrange,broadcast_on:"admin_ticket_event",broadcast_as:"admin_ticket"},null,8,["fields","get_data_url","edit_url","delete_url","arrange"])}const Vs=S(Es,[["render",Rs]]),Ls={extends:D,name:"TicketComponent",components:{UserComponent:D,UserNameComponent:N,InputImageComponent:R},created(){this.incoming_users&&(this.users=JSON.parse(this.incoming_users)),this.parent_id&&(this.obj.user_id=parseInt(this.parent_id))},props:{incoming_users:String,parent_id:String|NaN,placeholder_image:String},data(){return{obj:{user_id:2,image:"",subject:"",text:"",read_admin:1,read_owner:0,status:0},users:[],disabledButtons:!1,statusValues:[{val:0,description:"Открыто"},{val:1,description:"Закрыто"}]}},methods:{save(){let t=this.preparingFields();t.append("image",$("input[name=image]")[0].files[0]),this.saving(t)}}},Ks={class:"col-lg-3 col-md-4 col-sm-12"},Ys={key:0,class:"panel panel-flat"},Js=o("div",{class:"panel-heading"},[o("h5",{class:"panel-title"},"Автор обращения")],-1),Ws={class:"panel-body"},zs=["value"],Hs={class:"panel panel-flat"},qs=o("div",{class:"panel-heading"},[o("h5",{class:"panel-title"},"Скриншот")],-1),Gs={class:"panel-body"},Qs={class:"col-lg-9 col-md-8 col-sm-12"},Xs={class:"panel panel-flat"},Zs={class:"panel-body"},er={class:"panel panel-flat"},tr=o("div",{class:"panel-heading"},[o("h5",{class:"panel-title"},"Статус обращения")],-1),nr={class:"panel-body"},or=["id","value"],sr=["for"],rr={class:"panel panel-flat"},ar={class:"panel-body"};function ir(t,e,r,f,n,m){const c=d("UserNameComponent"),k=d("InputImageComponent"),p=d("InputComponent"),w=d("TextAreaComponent"),u=d("CheckboxComponent"),_=d("ButtonComponent");return s(),i(g,null,[o("div",Ks,[r.parent_id?v("",!0):(s(),i("div",Ys,[Js,o("div",Ws,[x(o("select",{"onUpdate:modelValue":e[0]||(e[0]=a=>n.obj.user_id=a),class:"select form-control"},[(s(!0),i(g,null,y(n.users,(a,h)=>(s(),i("option",{value:a.id,key:"author"+h},[l(c,{user:a},null,8,["user"])],8,zs))),128))],512),[[I,n.obj.user_id]])])])),o("div",Hs,[qs,o("div",Gs,[l(k,{name:"image",placeholder_image:r.placeholder_image,image:n.obj.image,error:t.errors.image},null,8,["placeholder_image","image","error"])])])]),o("div",Qs,[o("div",Xs,[o("div",Zs,[l(p,{label:"Тема обращения",type:"text",min:"3",max:"255",placeholder:"Укажите тему обращения",error:t.errors.subject,value:n.obj.subject,"onUpdate:value":e[1]||(e[1]=a=>n.obj.subject=a),onChange:e[2]||(e[2]=a=>t.errors.subject=null)},null,8,["error","value"]),l(w,{label:"Описание проблемы",max:"3000",value:n.obj.text,"onUpdate:value":e[3]||(e[3]=a=>n.obj.text=a),error:t.errors.text,onChange:e[4]||(e[4]=a=>t.errors.text=null)},null,8,["value","error"])])]),o("div",er,[tr,o("div",nr,[(s(!0),i(g,null,y(n.statusValues,(a,h)=>(s(),i("div",{class:"form-group no-margin-bottom",key:"radio"+h},[x(o("input",{class:"order-status",id:"status_"+a.val,value:a.val,type:"radio","onUpdate:modelValue":e[5]||(e[5]=C=>n.obj.status=C)},null,8,or),[[O,n.obj.status]]),o("label",{class:"ml-10 form-check-label",for:"status_"+a.val},[o("small",null,b(a.description),1)],8,sr)]))),128))])]),o("div",rr,[o("div",ar,[l(u,{name:"read_admin",label:"Прочитано админом",checked:n.obj.read_admin,"onUpdate:checked":e[6]||(e[6]=a=>n.obj.read_admin=a)},null,8,["checked"]),l(u,{name:"read_owner",label:"Прочитано автором",checked:n.obj.read_owner,"onUpdate:checked":e[7]||(e[7]=a=>n.obj.read_owner=a)},null,8,["checked"]),l(_,{class_name:"btn btn-primary mt-3 pull-right",text:"Сохранить",disabled:t.disabledSubmit,onClick:m.save},null,8,["disabled","onClick"])])])])],64)}const lr=S(Ls,[["render",ir]]),dr={name:"AnswersComponent",components:{TicketsDataTableComponent:Y},props:{get_answers_url:String,edit_answer_url:String,delete_answer_url:String,arrange:String},data(){return{fields:{id:"id",user:"Пользователь",image:"Скриншот",text:"Текст обращения",read_admin:"Прочитано админом",read_owner:"Прочитано автором"}}}};function cr(t,e,r,f,n,m){const c=d("TicketsDataTableComponent");return s(),j(c,{fields:n.fields,get_data_url:r.get_answers_url,edit_url:r.edit_answer_url,delete_url:r.delete_answer_url,delete_phrase:"Вы действительно хотите удалить эту заявку?",arrange:r.arrange,broadcast_on:"admin_answer_event",broadcast_as:"admin_answer"},null,8,["fields","get_data_url","edit_url","delete_url","arrange"])}const ur=S(dr,[["render",cr]]),_r={extends:D,name:"AnswerComponent",components:{UserComponent:D,UserNameComponent:N,InputImageComponent:R},created(){this.objId||(this.obj.user_id=parseInt(this.admin_id)),this.obj.ticket_id=parseInt(this.parent_id)},props:{admin_id:String,parent_id:String,placeholder_image:String},data(){return{obj:{ticket_id:0,user_id:1,image:"",text:"",read_admin:1,read_owner:0},disabledButtons:!1}},methods:{save(){this.obj.read_admin=1;let t=this.preparingFields();t.append("image",$("input[name=image]")[0].files[0]),this.saving(t)}}},pr={class:"col-lg-3 col-md-4 col-sm-12"},mr={class:"panel panel-flat"},hr=o("div",{class:"panel-heading"},[o("h5",{class:"panel-title"},"Скриншот")],-1),gr={class:"panel-body"},br={class:"col-lg-9 col-md-8 col-sm-12"},fr={class:"panel panel-flat"},vr={class:"panel-body"},Cr={class:"panel panel-flat"},kr={class:"panel-body"};function yr(t,e,r,f,n,m){const c=d("InputImageComponent"),k=d("TextAreaComponent"),p=d("CheckboxComponent"),w=d("ButtonComponent");return s(),i(g,null,[o("div",pr,[o("div",mr,[hr,o("div",gr,[l(c,{name:"image",placeholder_image:r.placeholder_image,image:n.obj.image,error:t.errors.image},null,8,["placeholder_image","image","error"])])])]),o("div",br,[o("div",fr,[o("div",vr,[l(k,{label:"Текст ответа",max:"3000",value:n.obj.text,"onUpdate:value":e[0]||(e[0]=u=>n.obj.text=u),error:t.errors.text,onChange:e[1]||(e[1]=u=>t.errors.text=null)},null,8,["value","error"])])]),o("div",Cr,[o("div",kr,[l(p,{name:"read_owner",label:"Прочитано пользователем",checked:n.obj.read_owner,"onUpdate:checked":e[2]||(e[2]=u=>n.obj.read_owner=u)},null,8,["checked"]),l(w,{class_name:"btn btn-primary mt-3 pull-right",text:"Сохранить",disabled:t.disabledSubmit,onClick:m.save},null,8,["disabled","onClick"])])])])],64)}const wr=S(_r,[["render",yr]]),J=ee({components:{UsersComponent:Bn,UserComponent:D,OrdersComponent:ot,OrderComponent:In,AvatarComponent:P,UserRatingComponent:An,EditOrderMapComponent:K,NoticeComponent:wo,PartnersComponent:$o,PartnerComponent:Ao,ActionsComponent:ts,ActionComponent:ys,TicketsComponent:Vs,TicketComponent:lr,AnswersComponent:ur,AnswerComponent:wr}});window.emitter=te();J.config.globalProperties.emitter=window.emitter;J.mount("#app");$(document).ready(function(){$(".styled").uniform(),$.mask.definitions.c="[1-2]",$("input[name=phone]").mask("+7(999)999-99-99"),$("input[name=born]").mask("99-99-9999"),$(".file-styled").uniform({wrapperClass:"bg-blue",fileButtonHtml:'<i class="icon-file-plus"></i>'});const t=$("#message-modal");t.find("h4").html()&&t.modal("show"),V("info",300),V("html",680),setTimeout(()=>{window.initImages(),window.bindFancybox(),window.mapStepsInit()},500),$("input[name=order_type_id]").change(function(){let e=$(this).parents(".form-group").find(".subtypes"),r=$(".subtypes");if(r.addClass("hidden"),r.find("input[type=radio]").prop("checked",!1),e.length){e.removeClass("hidden");let f=e.find("input[type=radio]");$(f[0]).prop("checked",!0)}}),$(".order-photo i.icon-close2").click(function(){let e=$("input[name=id]"),r=$(this).parents(".order-photo"),f=r.attr("photo_exist"),n=parseInt($(this).attr("id").replace("remove-",""));e.length&&f!==void 0&&axios.post("/admin/delete-order-image",{_token:window.tokenField,id:e.val(),pos:n}).then(function(){r.removeAttr("photo_exist"),r.find(".icon-file-plus2").removeClass("hidden")})}),$(".daterange-single").daterangepicker({onSelect:function(e){console.log(e)},singleDatePicker:!0,locale:{format:"DD/MM/YYYY",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],daysOfWeek:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],week:moment.locale("en",{week:{dow:1}})}}).on("apply.daterangepicker",function(e){window.emitter.emit("date-change",{name:$(e.target).attr("name"),value:$(e.target).val()}),$(e.target).parents(".date").find(".error").html("")})});const V=(t,e)=>{$("textarea[name="+t+"]").length&&(window.editor=CKEDITOR.replace(t,{height:e+"px"}))};
